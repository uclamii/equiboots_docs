

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bootstrap Estimate Evaluation &mdash; EquiBoots 0.0.0a9 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=6010b176" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=6010b176" />
      <link rel="stylesheet" type="text/css" href="_static/custom.js?v=96d057b0" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=9756ebf1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=a0ccc04e"></script>
      <script src="_static/custom.js?v=96d057b0"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="EquiBoots Class" href="equiboots_stats_classes.html" />
    <link rel="prev" title="Point Estimate Evaluation" href="point_estimate_metrics.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            EquiBoots
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Welcome to the EquiBoots Documentation!</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Point Estimate Metrics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="point_estimate_metrics.html">Point Estimate Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="point_estimate_metrics.html#group-metrics-point-plot">Group Metrics Point Plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="point_estimate_metrics.html#group-curve-plots">Group Curve Plots</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bootstrap Estimate Metrics</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Bootstrap Estimate Evaluation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bootstrap-setup">1. Bootstrap Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-1-1-instantiate-equiboots-with-bootstrapping"><strong>Step 1.1: Instantiate EquiBoots with Bootstrapping</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-1-2-slice-by-group-and-compute-metrics"><strong>Step 1.2: Slice by Group and Compute Metrics</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#disparity-analysis">2. Disparity Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#plot-disparity-ratios">Plot Disparity Ratios</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#eq_group_metrics_plot"><code class="docutils literal notranslate"><span class="pre">eq_group_metrics_plot()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#metric-differences">3. Metric Differences</a></li>
<li class="toctree-l2"><a class="reference internal" href="#statistical-significance-testing">4. Statistical Significance Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#metrics-table-with-significance-annotations"><strong>4.1: Metrics Table with Significance Annotations</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualize-differences-with-significance"><strong>4.2: Visualize Differences with Significance</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bootstrapped-group-curve-plots">Bootstrapped Group Curve Plots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#eq_plot_bootstrapped_group_curves"><code class="docutils literal notranslate"><span class="pre">eq_plot_bootstrapped_group_curves()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#roc-auc-curves">ROC AUC Curves</a></li>
<li class="toctree-l3"><a class="reference internal" href="#precision-recall-curves">Precision-Recall Curves</a></li>
<li class="toctree-l3"><a class="reference internal" href="#calibration-curves">Calibration Curves</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Classes, Attributes, &amp; Methods</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="equiboots_stats_classes.html">EquiBoots Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="equiboots_stats_classes.html#statisticaltester">StatisticalTester</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">iPython Notebooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ipynb_notebooks.html">Problem Types</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">From Model to Prediction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="model_to_pred.html">Preparing Model Outputs for Fairness Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Mathematical Framework</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mathematical_framework.html">Calibration Curves and Area Under the Curve</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About EquiBoots</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="citations.html">Citing EquiBoots</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EquiBoots</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Bootstrap Estimate Evaluation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="no-click"><a class="reference internal image-reference" href="_images/EquiBoots.png"><img alt="EquiBoots Logo" class="align-left" src="_images/EquiBoots.png" style="width: 300px;" />
</a>
<div style="height: 130px;"></div><section id="bootstrap-estimate-evaluation">
<h1>Bootstrap Estimate Evaluation<a class="headerlink" href="#bootstrap-estimate-evaluation" title="Link to this heading"></a></h1>
<p>While point estimates provide a snapshot of model performance for each subgroup,
they do not capture uncertainty or statistical variability. Bootstrap estimates
enhance fairness auditing by enabling confidence interval computation, statistical
significance testing, and disparity analysis through repeated resampling.</p>
<p>EquiBoots supports bootstrap-based estimation for both classification and regression
tasks. This section walks through the process of generating bootstrapped group metrics,
computing disparities, and performing statistical tests to assess whether observed
differences are statistically significant.</p>
<section id="bootstrap-setup">
<h2>1. Bootstrap Setup<a class="headerlink" href="#bootstrap-setup" title="Link to this heading"></a></h2>
<section id="step-1-1-instantiate-equiboots-with-bootstrapping">
<h3><strong>Step 1.1: Instantiate EquiBoots with Bootstrapping</strong><a class="headerlink" href="#step-1-1-instantiate-equiboots-with-bootstrapping" title="Link to this heading"></a></h3>
<p>To begin, we instantiate the <code class="docutils literal notranslate"><span class="pre">EquiBoots</span></code> class with the required inputs: the
true outcome labels (<code class="docutils literal notranslate"><span class="pre">y_test</span></code>), predicted class labels (<code class="docutils literal notranslate"><span class="pre">y_pred</span></code>),
predicted probabilities (<code class="docutils literal notranslate"><span class="pre">y_prob</span></code>), and a DataFrame that holds sensitive
attributes like <code class="docutils literal notranslate"><span class="pre">race</span></code> or <code class="docutils literal notranslate"><span class="pre">sex</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">y_pred</span></code>, <code class="docutils literal notranslate"><span class="pre">y_prob</span></code>, <code class="docutils literal notranslate"><span class="pre">y_test</span></code> are defined inside the <a class="reference internal" href="model_to_pred.html#modeling-generation"><span class="std std-ref">modeling generation section</span></a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For reccomended behaviour over 5000 bootstraps should be used. This ensures that we are properly
estimating the normal distribution.</p>
</div>
<p>Bootstrapping is enabled by passing the required arguments during initialization.
You must specify:</p>
<ul class="simple">
<li><p>A list of random seeds for reproducibility</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bootstrap_flag=True</span></code> to enable resampling</p></li>
<li><p>The number of bootstrap iterations (<code class="docutils literal notranslate"><span class="pre">num_bootstraps</span></code>)</p></li>
<li><p>The sample size for each bootstrap</p></li>
<li><p>Optional settings for stratification and balancing</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">equiboots</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">eqb</span>

<span class="n">int_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">eq2</span> <span class="o">=</span> <span class="n">eqb</span><span class="o">.</span><span class="n">EquiBoots</span><span class="p">(</span>
    <span class="n">y_true</span><span class="o">=</span><span class="n">y_test</span><span class="p">,</span>
    <span class="n">y_pred</span><span class="o">=</span><span class="n">y_pred</span><span class="p">,</span>
    <span class="n">y_prob</span><span class="o">=</span><span class="n">y_prob</span><span class="p">,</span>
    <span class="n">fairness_df</span><span class="o">=</span><span class="n">fairness_df</span><span class="p">,</span>
    <span class="n">fairness_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;race&quot;</span><span class="p">],</span>
    <span class="n">seeds</span><span class="o">=</span><span class="n">int_list</span><span class="p">,</span>
    <span class="n">reference_groups</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;White&quot;</span><span class="p">],</span>
    <span class="n">task</span><span class="o">=</span><span class="s2">&quot;binary_classification&quot;</span><span class="p">,</span>
    <span class="n">bootstrap_flag</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">num_bootstraps</span><span class="o">=</span><span class="mi">5001</span><span class="p">,</span>
    <span class="n">boot_sample_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">group_min_size</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span>
    <span class="n">balanced</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">stratify_by_outcome</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="step-1-2-slice-by-group-and-compute-metrics">
<h3><strong>Step 1.2: Slice by Group and Compute Metrics</strong><a class="headerlink" href="#step-1-2-slice-by-group-and-compute-metrics" title="Link to this heading"></a></h3>
<p>Once initialized, use the <code class="docutils literal notranslate"><span class="pre">grouper()</span></code> and <code class="docutils literal notranslate"><span class="pre">slicer()</span></code> methods to prepare bootstrapped
samples for each subgroup:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eq2</span><span class="o">.</span><span class="n">grouper</span><span class="p">(</span><span class="n">groupings_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;race&quot;</span><span class="p">])</span>
<span class="n">boots_race_data</span> <span class="o">=</span> <span class="n">eq2</span><span class="o">.</span><span class="n">slicer</span><span class="p">(</span><span class="s2">&quot;race&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Once this is done we get the metrics for each bootstrap, this will return a list of metrics for each bootstrap.
This may take some time to run.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">race_metrics</span> <span class="o">=</span> <span class="n">eq2</span><span class="o">.</span><span class="n">get_metrics</span><span class="p">(</span><span class="n">boots_race_data</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="disparity-analysis">
<h2>2. Disparity Analysis<a class="headerlink" href="#disparity-analysis" title="Link to this heading"></a></h2>
<p>Disparities quantify how model performance varies across subgroups relative to a reference.
Here we look at the ratio.</p>
<ul class="simple">
<li><p>In the context of bias and fairness in machine learning, disparity refers to the differences in model performance, predictions, or outcomes across different demographic or sensitive groups.</p></li>
<li><p>It quantifies how a model’s behavior varies for subgroups based on attributes like race, sex, age, or other characteristics.</p></li>
</ul>
<p>Here’s how you can represent the disparity ratio for a given metric <em>(M)</em> and a specific group <em>(G)</em> compared to a reference group <em>(R)</em>:</p>
<div class="math notranslate nohighlight">
\[\text{Disparity Ratio} = \frac{M(G)}{M(R)} \quad\]</div>
<p>For example, if you are looking at the “Predicted Prevalence” metric
(the proportion of individuals predicted to have a positive outcome), the
Predicted Prevalence Disparity Ratio for a group (e.g., “Black”) compared to a
reference group (e.g., “White”) would be:</p>
<div class="math notranslate nohighlight">
\[\text{Predicted Prevalence Ratio} = \frac{\text{Predicted Prevalence (Black)}}{\text{Predicted Prevalence (White)}}\]</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dispa</span> <span class="o">=</span> <span class="n">eq2</span><span class="o">.</span><span class="n">calculate_disparities</span><span class="p">(</span><span class="n">race_metrics</span><span class="p">,</span> <span class="s2">&quot;race&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="plot-disparity-ratios">
<h3>Plot Disparity Ratios<a class="headerlink" href="#plot-disparity-ratios" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="eq_group_metrics_plot">
<span class="sig-name descname"><span class="pre">eq_group_metrics_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group_metrics</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_cols</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'violinplot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categories</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tab20c'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_by_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Disparity_Metrics'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict_layout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_thresholds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.0,</span> <span class="pre">2.0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_pass_fail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leg_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistical_tests</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">plot_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eq_group_metrics_plot" title="Link to this definition"></a></dt>
<dd><p>Plot group and disparity metrics using Seaborn (violinplot, boxplot, etc.) with optional pass/fail coloring, statistical annotations, and layout customization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group_metrics</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>]</em><em>]</em><em>]</em>) – A list of dictionaries, each mapping group/category names to metric values.</p></li>
<li><p><strong>metric_cols</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – List of metric column names to plot (e.g., accuracy, precision).</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Title prefix or identifier to use in subplot titles.</p></li>
<li><p><strong>plot_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Seaborn plot type to use (e.g., <code class="docutils literal notranslate"><span class="pre">'violinplot'</span></code>, <code class="docutils literal notranslate"><span class="pre">'boxplot'</span></code>).</p></li>
<li><p><strong>categories</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> or </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Which categories/groups to include; ‘all’ or list of category names.</p></li>
<li><p><strong>include_legend</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to include a legend in the plot.</p></li>
<li><p><strong>cmap</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Colormap name for group coloring.</p></li>
<li><p><strong>color_by_group</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to assign separate colors by group.</p></li>
<li><p><strong>save_path</strong> (str or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Directory path to save the figure (if not <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p></li>
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Filename to use for saving the plot (excluding file extension).</p></li>
<li><p><strong>max_cols</strong> (int or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Maximum number of subplot columns. Rows are inferred.</p></li>
<li><p><strong>strict_layout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to apply tight layout for better spacing.</p></li>
<li><p><strong>figsize</strong> (Tuple[float, float] or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Optional figure size as (width, height) in inches.</p></li>
<li><p><strong>show_grid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to display gridlines on each subplot.</p></li>
<li><p><strong>plot_thresholds</strong> (<em>Tuple</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>]</em>) – Tuple indicating the (lower, upper) thresholds for pass/fail coloring.</p></li>
<li><p><strong>show_pass_fail</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to color tick labels based on threshold pass/fail status.</p></li>
<li><p><strong>leg_cols</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Number of columns to use in the legend layout.</p></li>
<li><p><strong>y_lim</strong> (Tuple[float, float] or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Y-axis limits for all subplots. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, determined automatically.</p></li>
<li><p><strong>statistical_tests</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) – Dictionary of test results, used to flag significant differences.</p></li>
<li><p><strong>plot_kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) – Additional keyword arguments to pass to the Seaborn plotting function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code>. The plot is either displayed or saved to disk.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">plot_type</span></code> parameter is flexible and accepts any valid Seaborn categorical plot function
such as <code class="docutils literal notranslate"><span class="pre">'violinplot'</span></code>, <code class="docutils literal notranslate"><span class="pre">'boxplot'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'stripplot'</span></code>.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eqb</span><span class="o">.</span><span class="n">eq_group_metrics_plot</span><span class="p">(</span>
    <span class="n">group_metrics</span><span class="o">=</span><span class="n">dispa</span><span class="p">,</span>
    <span class="n">metric_cols</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;Accuracy_Ratio&quot;</span><span class="p">,</span> <span class="s2">&quot;Precision_Ratio&quot;</span><span class="p">,</span> <span class="s2">&quot;Predicted_Prevalence_Ratio&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Prevalence_Ratio&quot;</span><span class="p">,</span> <span class="s2">&quot;FP_Rate_Ratio&quot;</span><span class="p">,</span> <span class="s2">&quot;TN_Rate_Ratio&quot;</span><span class="p">,</span> <span class="s2">&quot;Recall_Ratio&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;race&quot;</span><span class="p">,</span>
    <span class="n">categories</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;violinplot&quot;</span><span class="p">,</span>
    <span class="n">color_by_group</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">strict_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
    <span class="n">leg_cols</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
    <span class="n">max_cols</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<div class="no-click"><a class="reference internal image-reference" href="_images/disparity_ratio_plots.png"><img alt="Disparity Ratio Plot" class="align-center" src="_images/disparity_ratio_plots.png" style="width: 900px;" />
</a>
<div style="height: 40px;"></div></section>
</section>
<section id="metric-differences">
<h2>3. Metric Differences<a class="headerlink" href="#metric-differences" title="Link to this heading"></a></h2>
<p>EquiBoots also enables the user to look at the disparity in metric differences.
The difference between the performance of the model for one group against the reference group.</p>
<p>And here’s how you can represent the disparity difference between a group and the reference:</p>
<div class="math notranslate nohighlight">
\[\text{Disparity Difference} = M(G) - M(R)\]</div>
<p>Where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(M(G)\)</span> is the value of the metric for group <span class="math notranslate nohighlight">\(G\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(M(R)\)</span> is the value of the metric for the reference group <span class="math notranslate nohighlight">\(R\)</span>.</p></li>
</ul>
<p>For example, if you are looking at the “Predicted Prevalence” metric differences,
the Predicted Prevalence Disparity Difference for a group (e.g., “Black”) compared to a reference group (e.g., “White”) would be:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\text{Predicted Prevalence Difference} &amp;= \text{Predicted Prevalence (Black)} \\
&amp;\quad - \text{Predicted Prevalence (White)}
\end{align*}\end{split}\]</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">diffs</span> <span class="o">=</span> <span class="n">eq2</span><span class="o">.</span><span class="n">calculate_differences</span><span class="p">(</span><span class="n">race_metrics</span><span class="p">,</span> <span class="s2">&quot;race&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eqb</span><span class="o">.</span><span class="n">eq_group_metrics_plot</span><span class="p">(</span>
    <span class="n">group_metrics</span><span class="o">=</span><span class="n">diffs</span><span class="p">,</span>
    <span class="n">metric_cols</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;Accuracy_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Precision_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Predicted_Prevalence_diff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Prevalence_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;FP_Rate_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;TN_Rate_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Recall_diff&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;race&quot;</span><span class="p">,</span>
    <span class="n">categories</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;violinplot&quot;</span><span class="p">,</span>
    <span class="n">color_by_group</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">strict_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
    <span class="n">leg_cols</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
    <span class="n">max_cols</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<div class="no-click"><a class="reference internal image-reference" href="_images/disparity_differences_plots.png"><img alt="Statistically-Based Point Estimate Plot" class="align-center" src="_images/disparity_differences_plots.png" style="width: 900px;" />
</a>
<div style="height: 40px;"></div></section>
<section id="statistical-significance-testing">
<h2>4. Statistical Significance Testing<a class="headerlink" href="#statistical-significance-testing" title="Link to this heading"></a></h2>
<p>To determine whether disparities are statistically significant,
EquiBoots provides bootstrap-based hypothesis testing. This involves comparing the
distribution of bootstrapped metric differences to a null distribution of no effect.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">metrics_boot</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Accuracy_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Precision_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Recall_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;F1_Score_diff&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Specificity_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;TP_Rate_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;FP_Rate_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;FN_Rate_diff&quot;</span><span class="p">,</span>
    <span class="s2">&quot;TN_Rate_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Prevalence_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Predicted_Prevalence_diff&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ROC_AUC_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Average_Precision_Score_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Log_Loss_diff&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Brier_Score_diff&quot;</span><span class="p">,</span> <span class="s2">&quot;Calibration_AUC_diff&quot;</span>
<span class="p">]</span>

<span class="n">test_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;test_type&quot;</span><span class="p">:</span> <span class="s2">&quot;bootstrap_test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>
    <span class="s2">&quot;adjust_method&quot;</span><span class="p">:</span> <span class="s2">&quot;bonferroni&quot;</span><span class="p">,</span>
    <span class="s2">&quot;confidence_level&quot;</span><span class="p">:</span> <span class="mf">0.95</span><span class="p">,</span>
    <span class="s2">&quot;classification_task&quot;</span><span class="p">:</span> <span class="s2">&quot;binary_classification&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tail_type&quot;</span><span class="p">:</span> <span class="s2">&quot;two_tailed&quot;</span><span class="p">,</span>
    <span class="s2">&quot;metrics&quot;</span><span class="p">:</span> <span class="n">metrics_boot</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">stat_test_results</span> <span class="o">=</span> <span class="n">eq2</span><span class="o">.</span><span class="n">analyze_statistical_significance</span><span class="p">(</span>
    <span class="n">metric_dict</span><span class="o">=</span><span class="n">race_metrics</span><span class="p">,</span>
    <span class="n">var_name</span><span class="o">=</span><span class="s2">&quot;race&quot;</span><span class="p">,</span>
    <span class="n">test_config</span><span class="o">=</span><span class="n">test_config</span><span class="p">,</span>
    <span class="n">differences</span><span class="o">=</span><span class="n">diffs</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<section id="metrics-table-with-significance-annotations">
<h3><strong>4.1: Metrics Table with Significance Annotations</strong><a class="headerlink" href="#metrics-table-with-significance-annotations" title="Link to this heading"></a></h3>
<p>You can summarize bootstrap-based statistical significance using <code class="docutils literal notranslate"><span class="pre">metrics_table()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stat_metrics_table_diff</span> <span class="o">=</span> <span class="n">eqb</span><span class="o">.</span><span class="n">metrics_table</span><span class="p">(</span>
    <span class="n">race_metrics</span><span class="p">,</span>
    <span class="n">statistical_tests</span><span class="o">=</span><span class="n">stat_test_results</span><span class="p">,</span>
    <span class="n">differences</span><span class="o">=</span><span class="n">diffs</span><span class="p">,</span>
    <span class="n">reference_group</span><span class="o">=</span><span class="s2">&quot;White&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Asterisks (*) indicate significant omnibus test results.</p></li>
<li><p>Triangles (▲) indicate significant pairwise differences from the reference group.</p></li>
</ul>
</div>
<p><strong>Output</strong></p>
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;}
.tg td, .tg th {
    border: 1px solid #000;
    font-family: Arial, sans-serif;
    font-size: 14px;
    padding: 8px;
    text-align: right;
}
.tg th {
    background-color: #f2f2f2;
    font-weight: bold;
}
.tg td:first-child, .tg th:first-child {
    text-align: left;
}
</style>
<div class="tg-wrap"><table class="tg">
<thead>
    <tr>
        <th>Metric</th>
        <th>Black</th>
        <th>Asian-Pac-Islander</th>
    </tr>
</thead>
<tbody>
    <tr><td>Accuracy_diff</td><td>0.070 *</td><td>-0.050</td></tr>
    <tr><td>Precision_diff</td><td>0.141 *</td><td>0.016</td></tr>
    <tr><td>Recall_diff</td><td>-0.111</td><td>-0.119</td></tr>
    <tr><td>F1_Score_diff</td><td>-0.050</td><td>-0.080</td></tr>
    <tr><td>Specificity_diff</td><td>0.056 *</td><td>-0.002</td></tr>
    <tr><td>TP_Rate_diff</td><td>-0.111</td><td>-0.119</td></tr>
    <tr><td>FP_Rate_diff</td><td>-0.056 *</td><td>0.002</td></tr>
    <tr><td>FN_Rate_diff</td><td>0.111</td><td>0.119</td></tr>
    <tr><td>TN_Rate_diff</td><td>0.056 *</td><td>-0.002</td></tr>
    <tr><td>Prevalence_diff</td><td>-0.122 *</td><td>0.035</td></tr>
    <tr><td>Predicted_Prevalence_diff</td><td>-0.133 *</td><td>-0.016</td></tr>
    <tr><td>ROC_AUC_diff</td><td>0.035</td><td>-0.041</td></tr>
    <tr><td>Average_Precision_Score_diff</td><td>-0.005</td><td>-0.044</td></tr>
    <tr><td>Log_Loss_diff</td><td>-0.131 *</td><td>0.113</td></tr>
    <tr><td>Brier_Score_diff</td><td>-0.043 *</td><td>0.036</td></tr>
    <tr><td>Calibration_AUC_diff</td><td>0.148 *</td><td>0.215 *</td></tr>
</tbody>
</table></div><div style="height: 40px;"></div></section>
<section id="visualize-differences-with-significance">
<h3><strong>4.2: Visualize Differences with Significance</strong><a class="headerlink" href="#visualize-differences-with-significance" title="Link to this heading"></a></h3>
<p>Finally, plot the statistically tested metric differences:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eqb</span><span class="o">.</span><span class="n">eq_group_metrics_plot</span><span class="p">(</span>
    <span class="n">group_metrics</span><span class="o">=</span><span class="n">diffs</span><span class="p">,</span>
    <span class="n">metric_cols</span><span class="o">=</span><span class="n">metrics_boot</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;race&quot;</span><span class="p">,</span>
    <span class="n">categories</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;violinplot&quot;</span><span class="p">,</span>
    <span class="n">color_by_group</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">show_grid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">max_cols</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
    <span class="n">strict_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">show_pass_fail</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">statistical_tests</span><span class="o">=</span><span class="n">stat_test_results</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<div class="no-click"><a class="reference internal image-reference" href="_images/differences_stat_sig_plot.png"><img alt="Statistical Signficance of Differences" class="align-center" src="_images/differences_stat_sig_plot.png" style="width: 1000px;" />
</a>
<div style="height: 40px;"></div></section>
</section>
<section id="bootstrapped-group-curve-plots">
<h2>Bootstrapped Group Curve Plots<a class="headerlink" href="#bootstrapped-group-curve-plots" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="eq_plot_bootstrapped_group_curves">
<span class="sig-name descname"><span class="pre">eq_plot_bootstrapped_group_curves</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boot_sliced_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">curve_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'roc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">common_grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">np.linspace(0,</span> <span class="pre">1,</span> <span class="pre">100)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar_every</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_kwgs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Bootstrapped</span> <span class="pre">Curve</span> <span class="pre">by</span> <span class="pre">Group'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bootstrapped_curve'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(8,</span> <span class="pre">6)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subplots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_rows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_by_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#eq_plot_bootstrapped_group_curves" title="Link to this definition"></a></dt>
<dd><p>Plots bootstrapped ROC, precision-recall, or calibration curves by group. This function takes a list of bootstrapped group-level datasets and computes uncertainty bands for each curve using interpolation over a shared x-axis grid. Results can be rendered in overlay or subplot formats, with optional gridlines and curve-specific annotations (e.g., AUROC, AUCPR, or Brier score).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boot_sliced_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>, </em><em>np.ndarray</em><em>]</em><em>]</em><em>]</em>) – A list of bootstrap iterations, each mapping group name to <code class="docutils literal notranslate"><span class="pre">y_true</span></code> and <code class="docutils literal notranslate"><span class="pre">y_prob</span></code> arrays.</p></li>
<li><p><strong>curve_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Type of curve to plot: <code class="docutils literal notranslate"><span class="pre">roc</span></code>, <code class="docutils literal notranslate"><span class="pre">pr</span></code>, or <code class="docutils literal notranslate"><span class="pre">calibration</span></code>.</p></li>
<li><p><strong>common_grid</strong> (<em>np.ndarray</em>) – Shared x-axis points used to interpolate all curves for consistency.</p></li>
<li><p><strong>bar_every</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Number of points between vertical error bars on the bootstrapped curve.</p></li>
<li><p><strong>n_bins</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Number of bins for calibration plots.</p></li>
<li><p><strong>line_kwgs</strong> (dict[str, Any] or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Optional style parameters for the diagonal or baseline reference line.</p></li>
<li><p><strong>title</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Title of the entire plot.</p></li>
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Filename (without extension) used when saving the plot.</p></li>
<li><p><strong>save_path</strong> (str or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Directory path to save the figure. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the plot is displayed instead.</p></li>
<li><p><strong>figsize</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.13)"><em>tuple</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>]</em>) – Size of the figure as a (width, height) tuple in inches.</p></li>
<li><p><strong>dpi</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Dots-per-inch resolution of the figure.</p></li>
<li><p><strong>subplots</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to show each group’s curve in a separate subplot.</p></li>
<li><p><strong>n_cols</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Number of columns in the subplot grid.</p></li>
<li><p><strong>n_rows</strong> (int or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Number of rows in the subplot grid. Auto-calculated if None.</p></li>
<li><p><strong>group</strong> (str or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Optional name of a single group to plot instead of all groups.</p></li>
<li><p><strong>color_by_group</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to assign colors by group identity.</p></li>
<li><p><strong>exclude_groups</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.13)"><em>set</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Groups to exclude from the plot, either by name or by minimum sample size.</p></li>
<li><p><strong>show_grid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – Whether to display gridlines on each plot.</p></li>
<li><p><strong>y_lim</strong> (tuple[float, float] or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – Optional y-axis limits (min, max) to enforce on the plots.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<section id="roc-auc-curves">
<h3>ROC AUC Curves<a class="headerlink" href="#roc-auc-curves" title="Link to this heading"></a></h3>
<p>The example below shows bootstrapped ROC curves stratified by race group.
Each curve reflects the average ROC performance across resampled iterations,
with vertical error bars illustrating variability.</p>
<p>By toggling the <code class="docutils literal notranslate"><span class="pre">subplots</span></code> argument, the visualization can either overlay all group curves
on a single axis (<code class="docutils literal notranslate"><span class="pre">subplots=False</span></code>) or display each group in its own panel (<code class="docutils literal notranslate"><span class="pre">subplots=True</span></code>),
depending on the desired layout.</p>
<p><strong>Example 1 (Overlayed Curves with Error Bars)</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eqb</span><span class="o">.</span><span class="n">eq_plot_bootstrapped_group_curves</span><span class="p">(</span>
    <span class="n">boot_sliced_data</span><span class="o">=</span><span class="n">boots_race_data</span><span class="p">,</span>
    <span class="n">curve_type</span><span class="o">=</span><span class="s2">&quot;roc&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Bootstrapped ROC Curve by Race&quot;</span><span class="p">,</span>
    <span class="n">bar_every</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">n_bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="n">color_by_group</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<div class="no-click"><a class="reference internal image-reference" href="_images/roc_auc_bootstrapped.png"><img alt="Statistical Signficance of Differences" class="align-center" src="_images/roc_auc_bootstrapped.png" style="width: 550px;" />
</a>
<div style="height: 40px;"></div><p>This view helps quantify variability in model performance across subpopulations.
Overlaying curves in a single plot (<code class="docutils literal notranslate"><span class="pre">subplots=False</span></code>) makes it easy to compare
uncertainty bands side by side. Groups with insufficient data or minimal representation
can be excluded using <code class="docutils literal notranslate"><span class="pre">exclude_groups</span></code>.</p>
<p class="rubric">Example 2 (<code class="docutils literal notranslate"><span class="pre">subplots=True</span></code>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eqb</span><span class="o">.</span><span class="n">eq_plot_bootstrapped_group_curves</span><span class="p">(</span>
    <span class="n">boot_sliced_data</span><span class="o">=</span><span class="n">boots_race_data</span><span class="p">,</span>
    <span class="n">curve_type</span><span class="o">=</span><span class="s2">&quot;roc&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Bootstrapped ROC Curve by Race&quot;</span><span class="p">,</span>
    <span class="n">bar_every</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">n_bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="n">color_by_group</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<div class="no-click"><a class="reference internal image-reference" href="_images/roc_auc_subplots_bootstrapped.png"><img alt="Bootstrapped ROC AUC Curves by Race (subplots)" class="align-center" src="_images/roc_auc_subplots_bootstrapped.png" style="width: 550px;" />
</a>
<div style="height: 40px;"></div><p>This multi‐panel layout makes side-by-side comparison of each group’s uncertainty bands straightforward.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eqb</span><span class="o">.</span><span class="n">eq_plot_bootstrapped_group_curves</span><span class="p">(</span>
    <span class="n">boot_sliced_data</span><span class="o">=</span><span class="n">boots_race_data</span><span class="p">,</span>
    <span class="n">curve_type</span><span class="o">=</span><span class="s2">&quot;pr&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Bootstrapped PR Curve by Race&quot;</span><span class="p">,</span>
    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;boot_roc_race&quot;</span><span class="p">,</span>
    <span class="n">save_path</span><span class="o">=</span><span class="s2">&quot;./images&quot;</span><span class="p">,</span>
    <span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">bar_every</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="c1"># n_rows=1,</span>
    <span class="n">n_cols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">n_bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="n">color_by_group</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="precision-recall-curves">
<h3>Precision-Recall Curves<a class="headerlink" href="#precision-recall-curves" title="Link to this heading"></a></h3>
<p>The example below presents bootstrapped precision-recall (PR) curves grouped by race.
Each curve illustrates the average precision-recall relationship across bootstrapped samples,
with vertical error bars indicating the variability at select recall thresholds.</p>
<p>As with ROC curves, setting <code class="docutils literal notranslate"><span class="pre">subplots=False</span></code> overlays all groups in a single plot,
allowing for compact comparison. Alternatively, setting <code class="docutils literal notranslate"><span class="pre">subplots=True</span></code> creates individual panels
for each group to better visualize variations in precision across recall levels.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eqb</span><span class="o">.</span><span class="n">eq_plot_bootstrapped_group_curves</span><span class="p">(</span>
    <span class="n">boot_sliced_data</span><span class="o">=</span><span class="n">boots_race_data</span><span class="p">,</span>
    <span class="n">curve_type</span><span class="o">=</span><span class="s2">&quot;pr&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Bootstrapped PR Curve by Race&quot;</span><span class="p">,</span>
    <span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">bar_every</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">n_cols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">n_bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="n">color_by_group</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<div class="no-click"><a class="reference internal image-reference" href="_images/pr_curves_subplots_bootstrapped.png"><img alt="Bootstrapped PR Curves by Race (subplots)" class="align-center" src="_images/pr_curves_subplots_bootstrapped.png" style="width: 550px;" />
</a>
<div style="height: 40px;"></div><p>Subplot mode offers a cleaner side-by-side comparison of each group’s bootstrapped precision-recall behavior,
making small differences in model performance easier to interpret.</p>
</section>
<section id="calibration-curves">
<h3>Calibration Curves<a class="headerlink" href="#calibration-curves" title="Link to this heading"></a></h3>
<p>The following example visualizes bootstrapped calibration curves grouped by race.
Each curve reflects the average alignment between predicted probabilities and observed outcomes,
aggregated over multiple resampled datasets. Vertical bars show variability in the calibration estimate
at evenly spaced probability intervals.</p>
<p>As with ROC and PR plots, <code class="docutils literal notranslate"><span class="pre">subplots=False</span></code> will overlay all group curves on one axis,
while <code class="docutils literal notranslate"><span class="pre">subplots=True</span></code> generates a separate panel for each group.</p>
<p><strong>Example 1 (Overlayed Calibration Curves with Error Bars)</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eqb</span><span class="o">.</span><span class="n">eq_plot_bootstrapped_group_curves</span><span class="p">(</span>
    <span class="n">boot_sliced_data</span><span class="o">=</span><span class="n">boots_race_data</span><span class="p">,</span>
    <span class="n">curve_type</span><span class="o">=</span><span class="s2">&quot;calibration&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Bootstrapped Calibration Curve by Race&quot;</span><span class="p">,</span>
    <span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">bar_every</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">n_bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="n">color_by_group</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Output</strong></p>
<div class="no-click"><a class="reference internal image-reference" href="_images/calibration_bootstrapped.png"><img alt="Bootstrapped Calibration Curves by Race (overlayed)" class="align-center" src="_images/calibration_bootstrapped.png" style="width: 550px;" />
</a>
<div style="height: 40px;"></div><p>Using subplots offers a focused view of calibration accuracy for each group,
allowing nuanced inspection of where the model’s confidence aligns or diverges from observed outcomes.</p>
</section>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading"></a></h2>
<p>Bootstrapping provides a rigorous and interpretable framework for evaluating fairness
by estimating uncertainty in performance metrics, computing disparities, and identifying
statistically significant differences between groups.</p>
<p>Use EquiBoots to support robust fairness audits that go beyond simple point comparisons
and account for sampling variability and multiple comparisons.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="point_estimate_metrics.html" class="btn btn-neutral float-left" title="Point Estimate Evaluation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="equiboots_stats_classes.html" class="btn btn-neutral float-right" title="EquiBoots Class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright UCLA CTSI ML Team: Leonid Shpaner, Arthur Funnell, Al Rahrooh, Colin Beam, and Panayiotis Petousis.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>